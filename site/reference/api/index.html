<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://frbennett.github.io/shapleyx/reference/api/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>API - ShapleyX Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API";
        var mkdocs_page_input_path = "reference\\api.md";
        var mkdocs_page_url = "/shapleyx/reference/api/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> ShapleyX Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/quickstart/">Quickstart</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/basic-usage/">Basic Usage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/owen_product_function/">Example Workflow</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How-to Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../how-to-guides/common-tasks/">Common Tasks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">API</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#shapleyx.rshdmr">rshdmr</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.eval_all_indices">eval_all_indices</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.get_deltax">get_deltax</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.get_hx">get_hx</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.get_pawn">get_pawn</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.get_pawnx">get_pawnx</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.get_pruned_data">get_pruned_data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.legendre_expand">legendre_expand</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.predict">predict</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.read_data">read_data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.run_all">run_all</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.run_plot_hdmr">run_plot_hdmr</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.run_regression">run_regression</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.run_stats">run_stats</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shapleyx.rshdmr.transform_data">transform_data</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ard/">ARD</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Explanation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../explanation/theory/">Theory</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">ShapleyX Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Reference</li>
      <li class="breadcrumb-item active">API</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/frbennett/shapleyx/edit/master/docs/reference/api.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="api-reference">API Reference</h1>


<div class="doc doc-object doc-class">



<h3 id="shapleyx.rshdmr" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">shapleyx</span><span class="o">.</span><span class="n">rshdmr</span><span class="p">(</span><span class="n">data_file</span><span class="p">,</span> <span class="n">polys</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">k_best</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">p_average</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;ard&#39;</span><span class="p">,</span> <span class="n">starting_iter</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">CI</span><span class="o">=</span><span class="mf">95.0</span><span class="p">,</span> <span class="n">number_of_resamples</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">cv_tol</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents first">


        <p>Global Sensitivity Analysis using RS-HDMR with RVM or OMP and linear regression.
<strong>Examples:</strong></p>
<p>This class implements a global sensitivity analysis framework combining:</p>
<ul>
<li>Sparse Random Sampling (SRS)</li>
<li>High Dimensional Model Representation (HDMR)</li>
<li>RVM (Relevance Vector Machine) or OMP (Orthogonal Matching Pursuit) for parameter selection</li>
<li>Linear regression for parameter refinement</li>
</ul>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_file</code></b>
                  (<code><span title="str">str</span> or <span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Input data file path or DataFrame.</p>
              </div>
            </li>
            <li>
              <b><code>polys</code></b>
                  (<code><span title="list">list</span></code>, default:
                      <code>[10, 5]</code>
)
              –
              <div class="doc-md-description">
                <p>Polynomial orders for expansion. Defaults to [10, 5].</p>
              </div>
            </li>
            <li>
              <b><code>n_jobs</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>-1</code>
)
              –
              <div class="doc-md-description">
                <p>Number of parallel jobs. Defaults to -1.</p>
              </div>
            </li>
            <li>
              <b><code>test_size</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.25</code>
)
              –
              <div class="doc-md-description">
                <p>Test set size ratio. Defaults to 0.25.</p>
              </div>
            </li>
            <li>
              <b><code>limit</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>2.0</code>
)
              –
              <div class="doc-md-description">
                <p>Coefficient limit. Defaults to 2.0.</p>
              </div>
            </li>
            <li>
              <b><code>k_best</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>1</code>
)
              –
              <div class="doc-md-description">
                <p>Number of best features. Defaults to 1.</p>
              </div>
            </li>
            <li>
              <b><code>p_average</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>2</code>
)
              –
              <div class="doc-md-description">
                <p>Parameter for averaging. Defaults to 2.</p>
              </div>
            </li>
            <li>
              <b><code>n_iter</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>300</code>
)
              –
              <div class="doc-md-description">
                <p>Number of iterations. Defaults to 300.</p>
              </div>
            </li>
            <li>
              <b><code>verbose</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              –
              <div class="doc-md-description">
                <p>Verbosity flag. Defaults to False.</p>
              </div>
            </li>
            <li>
              <b><code>method</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;ard&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>Regression method ('ard', 'omp', etc.). Defaults to 'ard'. 
can take values</p>
<ul>
<li>'ard' - Automatic Relevance Determination</li>
<li>'omp' - Orthogonal Matching Pursuit from sklearn.linear_model</li>
<li>'ard_cv' - Automatic Relevance Determination with cross-validation</li>
<li>'omp_cv' - Orthogonal Matching Pursuit with cross-validation from sklearn.linear_model</li>
<li>'ard_sk' - Automatic Relevance Determination from sklearn.linear_model</li>
</ul>
              </div>
            </li>
            <li>
              <b><code>starting_iter</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>5</code>
)
              –
              <div class="doc-md-description">
                <p>Starting iteration. Defaults to 5.</p>
              </div>
            </li>
            <li>
              <b><code>resampling</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>True</code>
)
              –
              <div class="doc-md-description">
                <p>Enable bootstrap resampling. Defaults to True.</p>
              </div>
            </li>
            <li>
              <b><code>CI</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>95.0</code>
)
              –
              <div class="doc-md-description">
                <p>Confidence interval percentage. Defaults to 95.0.</p>
              </div>
            </li>
            <li>
              <b><code>number_of_resamples</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>1000</code>
)
              –
              <div class="doc-md-description">
                <p>Number of bootstrap samples. Defaults to 1000.</p>
              </div>
            </li>
            <li>
              <b><code>cv_tol</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.05</code>
)
              –
              <div class="doc-md-description">
                <p>Cross-validation tolerance. Defaults to 0.05.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>X</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Input features dataframe.</p>
              </div>
            </li>
            <li>
              <b><code>Y</code></b>
                  (<code><span title="pandas.Series">Series</span></code>)
              –
              <div class="doc-md-description">
                <p>Target variable series.</p>
              </div>
            </li>
            <li>
              <b><code>X_T</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Transformed features in unit hypercube.</p>
              </div>
            </li>
            <li>
              <b><code>ranges</code></b>
                  (<code><span title="list">list</span></code>)
              –
              <div class="doc-md-description">
                <p>Ranges of transformed data.</p>
              </div>
            </li>
            <li>
              <b><code>X_T_L</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Expanded features with Legendre polynomials.</p>
              </div>
            </li>
            <li>
              <b><code>coef_</code></b>
                  (<code><span title="np.array">array</span></code>)
              –
              <div class="doc-md-description">
                <p>Regression coefficients.</p>
              </div>
            </li>
            <li>
              <b><code>y_pred</code></b>
                  (<code><span title="np.array">array</span></code>)
              –
              <div class="doc-md-description">
                <p>Predicted values.</p>
              </div>
            </li>
            <li>
              <b><code>evs</code></b>
                  (<code><span title="dict">dict</span></code>)
              –
              <div class="doc-md-description">
                <p>Model evaluation statistics.</p>
              </div>
            </li>
            <li>
              <b><code>results</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Sobol indices results.</p>
              </div>
            </li>
            <li>
              <b><code>non_zero_coefficients</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Non-zero coefficients.</p>
              </div>
            </li>
            <li>
              <b><code>shap</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Shapley effects.</p>
              </div>
            </li>
            <li>
              <b><code>total</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Total sensitivity indices.</p>
              </div>
            </li>
            <li>
              <b><code>surrogate_model</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Trained surrogate model for predictions.</p>
              </div>
            </li>
            <li>
              <b><code>primitive_variables</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Primitive variables from Legendre expansion.</p>
              </div>
            </li>
            <li>
              <b><code>poly_orders</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Polynomial orders used in Legendre expansion.</p>
              </div>
            </li>
            <li>
              <b><code>delta_instance</code></b>
                  (<code><span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Instance of pawn.DeltaX or pawn.hX for delta/h indices calculation.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Initialize analyzer</span>
<span class="n">analyzer</span> <span class="o">=</span> <span class="n">rshdmr</span><span class="p">(</span><span class="n">data_file</span><span class="o">=</span><span class="s1">&#39;input.csv&#39;</span><span class="p">,</span> <span class="n">polys</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;ard&#39;</span><span class="p">)</span>

<span class="c1"># Run analysis</span>
<span class="n">sobol</span><span class="p">,</span> <span class="n">shapley</span><span class="p">,</span> <span class="n">total</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">run_all</span><span class="p">()</span>

<span class="c1"># Make predictions</span>
<span class="n">predictions</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">new_data</span><span class="p">)</span>

<span class="c1"># Get sensitivity indices</span>
<span class="n">pawn_results</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">get_pawn</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<p><strong>Todo:</strong></p>
<ul>
<li>Improve memory management for large expansions</li>
</ul>







                  <details class="quote">
                    <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">data_file</span><span class="p">,</span> <span class="n">polys</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
             <span class="n">n_jobs</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
             <span class="n">test_size</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span>
             <span class="n">limit</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span>
             <span class="n">k_best</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
             <span class="n">p_average</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
             <span class="n">n_iter</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
             <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;ard&#39;</span><span class="p">,</span>
             <span class="n">starting_iter</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
             <span class="n">resampling</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
             <span class="n">CI</span><span class="o">=</span><span class="mf">95.0</span><span class="p">,</span>
             <span class="n">number_of_resamples</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
             <span class="n">cv_tol</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">read_data</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_jobs</span> <span class="o">=</span> <span class="n">n_jobs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">test_size</span> <span class="o">=</span> <span class="n">test_size</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">limit</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">k_best</span> <span class="o">=</span> <span class="n">k_best</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">p_average</span> <span class="o">=</span>  <span class="n">p_average</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">polys</span> <span class="o">=</span>  <span class="n">polys</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_1st</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">polys</span><span class="p">)</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">n_iter</span> <span class="o">=</span> <span class="n">n_iter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">starting_iter</span> <span class="o">=</span> <span class="n">starting_iter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resampling</span> <span class="o">=</span> <span class="n">resampling</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">CI</span> <span class="o">=</span> <span class="n">CI</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">number_of_resamples</span> <span class="o">=</span> <span class="n">number_of_resamples</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cv_tol</span> <span class="o">=</span> <span class="n">cv_tol</span> 
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.eval_all_indices" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_all_indices</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Evaluates Sobol indices, Shapley effects, and total sensitivity indices.</p>
<p>Uses the <code>indicies.eval_indices</code> utility.</p>


<details class="updates-the-following-attributes" open>
  <summary>Updates the following attributes</summary>
  <p>self.results (pd.DataFrame): DataFrame containing Sobol indices results.
self.non_zero_coefficients (pd.DataFrame): DataFrame of non-zero coefficients.
self.shap (pd.DataFrame): DataFrame containing Shapley effects.
self.total (pd.DataFrame): DataFrame containing total sensitivity indices.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">eval_all_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluates Sobol indices, Shapley effects, and total sensitivity indices.</span>

<span class="sd">    Uses the `indicies.eval_indices` utility.</span>

<span class="sd">    Updates the following attributes:</span>
<span class="sd">        self.results (pd.DataFrame): DataFrame containing Sobol indices results.</span>
<span class="sd">        self.non_zero_coefficients (pd.DataFrame): DataFrame of non-zero coefficients.</span>
<span class="sd">        self.shap (pd.DataFrame): DataFrame containing Shapley effects.</span>
<span class="sd">        self.total (pd.DataFrame): DataFrame containing total sensitivity indices.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">eval_indicies</span> <span class="o">=</span> <span class="n">indicies</span><span class="o">.</span><span class="n">eval_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X_T_L</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coef_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evs</span><span class="p">)</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="n">eval_indicies</span><span class="o">.</span><span class="n">get_sobol_indicies</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">non_zero_coefficients</span> <span class="o">=</span> <span class="n">eval_indicies</span><span class="o">.</span><span class="n">get_non_zero_coefficients</span><span class="p">()</span> 

    <span class="bp">self</span><span class="o">.</span><span class="n">shap</span> <span class="o">=</span> <span class="n">eval_indicies</span><span class="o">.</span><span class="n">eval_shapley</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">eval_indicies</span><span class="o">.</span><span class="n">eval_total_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.get_deltax" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_deltax</span><span class="p">(</span><span class="n">num_unconditioned</span><span class="p">,</span> <span class="n">delta_samples</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calculate delta indices for the given number of unconditioned variables and delta samples.</p>
<p>This method initializes a DeltaX instance using the provided data and parameters,
then computes the delta indices based on the specified number of unconditioned variables
and delta samples.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>num_unconditioned</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>The number of unconditioned variables.</p>
              </div>
            </li>
            <li>
              <b><code>delta_samples</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>The number of delta samples to generate.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
              –
              <div class="doc-md-description">
                <p>pd.DataFrame: A DataFrame containing the computed delta indices.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_deltax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_unconditioned</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">delta_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>      
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate delta indices for the given number of unconditioned variables and delta samples.</span>

<span class="sd">    This method initializes a DeltaX instance using the provided data and parameters,</span>
<span class="sd">    then computes the delta indices based on the specified number of unconditioned variables</span>
<span class="sd">    and delta samples.</span>

<span class="sd">    Args:</span>
<span class="sd">        num_unconditioned (int): The number of unconditioned variables.</span>
<span class="sd">        delta_samples (int): The number of delta samples to generate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: A DataFrame containing the computed delta indices.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delta_instance</span> <span class="o">=</span> <span class="n">pawn</span><span class="o">.</span><span class="n">DeltaX</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_zero_coefficients</span><span class="p">)</span>
    <span class="n">delta_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_instance</span><span class="o">.</span><span class="n">get_deltax</span><span class="p">(</span><span class="n">num_unconditioned</span><span class="p">,</span> <span class="n">delta_samples</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">delta_indices</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.get_hx" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_hx</span><span class="p">(</span><span class="n">num_unconditioned</span><span class="p">,</span> <span class="n">delta_samples</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calculate delta indices for the given number of unconditioned variables and delta samples.</p>
<p>This method initializes a DeltaX instance using the provided data and parameters,
then computes the delta indices based on the specified number of unconditioned variables
and delta samples.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>num_unconditioned</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>The number of unconditioned variables.</p>
              </div>
            </li>
            <li>
              <b><code>delta_samples</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>The number of delta samples to generate.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
              –
              <div class="doc-md-description">
                <p>pd.DataFrame: A DataFrame containing the computed delta indices.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_hx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_unconditioned</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">delta_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>      
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate delta indices for the given number of unconditioned variables and delta samples.</span>

<span class="sd">    This method initializes a DeltaX instance using the provided data and parameters,</span>
<span class="sd">    then computes the delta indices based on the specified number of unconditioned variables</span>
<span class="sd">    and delta samples.</span>

<span class="sd">    Args:</span>
<span class="sd">        num_unconditioned (int): The number of unconditioned variables.</span>
<span class="sd">        delta_samples (int): The number of delta samples to generate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: A DataFrame containing the computed delta indices.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delta_instance</span> <span class="o">=</span> <span class="n">pawn</span><span class="o">.</span><span class="n">hX</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_zero_coefficients</span><span class="p">)</span>
    <span class="n">delta_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_instance</span><span class="o">.</span><span class="n">get_hx</span><span class="p">(</span><span class="n">num_unconditioned</span><span class="p">,</span> <span class="n">delta_samples</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">delta_indices</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.get_pawn" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pawn</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Estimates PAWN sensitivity indices directly from data.</p>
<p>Uses the <code>pawn.estimate_pawn</code> utility.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>S</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>10</code>
)
              –
              <div class="doc-md-description">
                <p>Number of slices/intervals for the PAWN estimation. Defaults to 10.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>dict</code></b>              –
              <div class="doc-md-description">
                <p>Dictionary containing the PAWN sensitivity indices for each feature.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">S</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Estimates PAWN sensitivity indices directly from data.</span>

<span class="sd">    Uses the `pawn.estimate_pawn` utility.</span>

<span class="sd">    Args:</span>
<span class="sd">        S (int, optional): Number of slices/intervals for the PAWN estimation. Defaults to 10.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary containing the PAWN sensitivity indices for each feature.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">num_features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
    <span class="n">pawn_results</span> <span class="o">=</span> <span class="n">pawn</span><span class="o">.</span><span class="n">estimate_pawn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">num_features</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pawn_results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.get_pawnx" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pawnx</span><span class="p">(</span><span class="n">num_unconditioned</span><span class="p">,</span> <span class="n">num_conditioned</span><span class="p">,</span> <span class="n">num_ks_samples</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calculates PAWN sensitivity indices using the surrogate model.</p>
<p>Uses the <code>pawn.pawnx</code> utility.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>num_unconditioned</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>Number of unconditioned samples for PAWN.</p>
              </div>
            </li>
            <li>
              <b><code>num_conditioned</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>Number of conditioned samples for PAWN.</p>
              </div>
            </li>
            <li>
              <b><code>num_ks_samples</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>Number of samples for the Kolmogorov-Smirnov test.</p>
              </div>
            </li>
            <li>
              <b><code>alpha</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.05</code>
)
              –
              <div class="doc-md-description">
                <p>Significance level for the KS test. Defaults to 0.05.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
              –
              <div class="doc-md-description">
                <p>pd.DataFrame: DataFrame containing the PAWN sensitivity indices.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pawnx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_unconditioned</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_conditioned</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_ks_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates PAWN sensitivity indices using the surrogate model.</span>

<span class="sd">    Uses the `pawn.pawnx` utility.</span>

<span class="sd">    Args:</span>
<span class="sd">        num_unconditioned (int): Number of unconditioned samples for PAWN.</span>
<span class="sd">        num_conditioned (int): Number of conditioned samples for PAWN.</span>
<span class="sd">        num_ks_samples (int): Number of samples for the Kolmogorov-Smirnov test.</span>
<span class="sd">        alpha (float, optional): Significance level for the KS test. Defaults to 0.05.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: DataFrame containing the PAWN sensitivity indices.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pawn_instance</span> <span class="o">=</span> <span class="n">pawn</span><span class="o">.</span><span class="n">pawnx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_zero_coefficients</span><span class="p">)</span>
    <span class="n">pawn_indices</span> <span class="o">=</span> <span class="n">pawn_instance</span><span class="o">.</span><span class="n">get_pawnx</span><span class="p">(</span><span class="n">num_unconditioned</span><span class="p">,</span> <span class="n">num_conditioned</span><span class="p">,</span> <span class="n">num_ks_samples</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> 
    <span class="k">return</span> <span class="n">pawn_indices</span> 
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.get_pruned_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pruned_data</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Generates a pruned dataset containing only the features with non-zero coefficients.</p>
<p>This method creates a new DataFrame that includes only the columns from the original
dataset (<code>X_T_L</code>) that correspond to the labels with non-zero coefficients. Additionally,
it includes the target variable (<code>Y</code>).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>pd.DataFrame: A DataFrame containing the pruned data with selected features and the target variable.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pruned_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a pruned dataset containing only the features with non-zero coefficients.</span>

<span class="sd">    This method creates a new DataFrame that includes only the columns from the original</span>
<span class="sd">    dataset (`X_T_L`) that correspond to the labels with non-zero coefficients. Additionally,</span>
<span class="sd">    it includes the target variable (`Y`).</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: A DataFrame containing the pruned data with selected features and the target variable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pruned_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">non_zero_coefficients</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span> <span class="p">:</span>
        <span class="n">pruned_data</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">X_T_L</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
    <span class="n">pruned_data</span><span class="p">[</span><span class="s1">&#39;Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Y</span>
    <span class="k">return</span> <span class="n">pruned_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.legendre_expand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">legendre_expand</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Performs Legendre polynomial expansion on the transformed data <code>self.X_T</code>.</p>
<p>Uses the <code>legendre.legendre_expand</code> utility.</p>


<details class="updates-the-following-attributes" open>
  <summary>Updates the following attributes</summary>
  <p>self.primitive_variables: Primitive variables from the expansion.
self.poly_orders: Polynomial orders used in the expansion.
self.X_T_L (pd.DataFrame): The expanded data matrix including Legendre terms.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">legendre_expand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Performs Legendre polynomial expansion on the transformed data `self.X_T`.</span>

<span class="sd">    Uses the `legendre.legendre_expand` utility.</span>

<span class="sd">    Updates the following attributes:</span>
<span class="sd">        self.primitive_variables: Primitive variables from the expansion.</span>
<span class="sd">        self.poly_orders: Polynomial orders used in the expansion.</span>
<span class="sd">        self.X_T_L (pd.DataFrame): The expanded data matrix including Legendre terms.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">expansion_data</span> <span class="o">=</span> <span class="n">legendre</span><span class="o">.</span><span class="n">legendre_expand</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X_T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">polys</span><span class="p">)</span>
    <span class="n">expansion_data</span><span class="o">.</span><span class="n">build_basis_set</span><span class="p">()</span> 

    <span class="bp">self</span><span class="o">.</span><span class="n">primitive_variables</span> <span class="o">=</span> <span class="n">expansion_data</span><span class="o">.</span><span class="n">get_primitive_variables</span><span class="p">()</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">poly_orders</span> <span class="o">=</span> <span class="n">expansion_data</span><span class="o">.</span><span class="n">get_poly_orders</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">X_T_L</span> <span class="o">=</span> <span class="n">expansion_data</span><span class="o">.</span><span class="n">get_expanded</span><span class="p">()</span>  
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.predict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Predicts output for new input data using the trained surrogate model.</p>
<p>If the surrogate model (<code>self.surrogate_model</code>) doesn't exist, it first
creates and fits one using <code>predictor.surrogate</code>.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>X</code></b>
                  (<code><span title="array">array</span> - <span title="like">like</span></code>)
              –
              <div class="doc-md-description">
                <p>Input data for which predictions are to be made.
Should have the same features as the original training data.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>array-like: Predicted output values.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Predicts output for new input data using the trained surrogate model.</span>

<span class="sd">    If the surrogate model (`self.surrogate_model`) doesn&#39;t exist, it first</span>
<span class="sd">    creates and fits one using `predictor.surrogate`.</span>

<span class="sd">    Args:</span>
<span class="sd">        X (array-like): Input data for which predictions are to be made.</span>
<span class="sd">            Should have the same features as the original training data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        array-like: Predicted output values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;surrogate_model&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">surrogate_model</span> <span class="o">=</span> <span class="n">predictor</span><span class="o">.</span><span class="n">surrogate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">non_zero_coefficients</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">surrogate_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">surrogate_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> 
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.read_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_data</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Reads data from a file or DataFrame.</p>
<p>Initializes the <code>self.X</code> (features) and <code>self.Y</code> (target) attributes.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>data_file</code></b>
                  (<code><span title="str">str</span> or <span title="pandas.DataFrame">DataFrame</span></code>)
              –
              <div class="doc-md-description">
                <p>Path to the data file (CSV) or a pandas DataFrame.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Raises:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="ValueError">ValueError</span></code>
              –
              <div class="doc-md-description">
                <p>If <code>data_file</code> is not a string path or a DataFrame.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_file</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reads data from a file or DataFrame.</span>

<span class="sd">    Initializes the `self.X` (features) and `self.Y` (target) attributes.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_file (str or pd.DataFrame): Path to the data file (CSV) or a pandas DataFrame.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If `data_file` is not a string path or a DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_file</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Found a DataFrame&#39;</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">data_file</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data_file must be either a pandas DataFrame or a file path (str).&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">Y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Y&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Clean up the original DataFrame to save memory</span>
    <span class="k">del</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.run_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_all</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Execute a complete sequence of steps for RS-HDMR (Random Sampling High-Dimensional Model Representation) analysis.</p>
<p>This method performs the following steps in sequence:</p>
<ol>
<li>Transforms the input data to a unit hypercube.</li>
<li>Builds basis functions using Legendre polynomials.</li>
<li>Runs regression analysis to fit the model.</li>
<li>Calculates and displays RS-HDMR model performance statistics.</li>
<li>Evaluates Sobol indices to quantify the contribution of each input variable to the output variance.</li>
<li>Calculates Shapley effects to measure the importance of each input variable.</li>
<li>Computes the total index to assess the overall impact of input variables.</li>
<li>If resampling is enabled, performs bootstrap resampling to estimate confidence intervals for Sobol indices and Shapley effects.</li>
<li>Prints a completion message with a randomly selected quote.</li>
</ol>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>tuple</code></b>              –
              <div class="doc-md-description">
                <p>A tuple containing three elements:</p>
<ul>
<li>sobol_indices (pd.DataFrame): A DataFrame containing Sobol indices for each input variable.</li>
<li>shapley_effects (pd.DataFrame): A DataFrame containing Shapley effects for each input variable.</li>
<li>total_index (pd.DataFrame): A DataFrame containing the total index for each input variable.</li>
</ul>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The method assumes that the necessary data and configurations are already set in the class instance.</li>
<li>If resampling is enabled (<code>self.resampling</code> is True), confidence intervals (CIs) are calculated for Sobol indices and Shapley effects.</li>
<li>The method uses helper functions like <code>transform_data</code>, <code>legendre_expand</code>, <code>run_regression</code>, <code>stats</code>, <code>plot_hdmr</code>, <code>eval_sobol_indices</code>, <code>get_shapley</code>, and <code>get_total_index</code> to perform specific tasks.</li>
<li>The completion message includes a randomly selected quote for a touch of inspiration.</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>sobol_indices, shapley_effects, total_index = instance.run_all()
print(sobol_indices)
print(shapley_effects)
print(total_index)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Execute a complete sequence of steps for RS-HDMR (Random Sampling High-Dimensional Model Representation) analysis.</span>

<span class="sd">This method performs the following steps in sequence:</span>

<span class="sd">1. Transforms the input data to a unit hypercube.</span>
<span class="sd">2. Builds basis functions using Legendre polynomials.</span>
<span class="sd">3. Runs regression analysis to fit the model.</span>
<span class="sd">4. Calculates and displays RS-HDMR model performance statistics.</span>
<span class="sd">5. Evaluates Sobol indices to quantify the contribution of each input variable to the output variance.</span>
<span class="sd">6. Calculates Shapley effects to measure the importance of each input variable.</span>
<span class="sd">7. Computes the total index to assess the overall impact of input variables.</span>
<span class="sd">8. If resampling is enabled, performs bootstrap resampling to estimate confidence intervals for Sobol indices and Shapley effects.</span>
<span class="sd">9. Prints a completion message with a randomly selected quote.</span>

<span class="sd">Returns:</span>
<span class="sd">    tuple: A tuple containing three elements:</span>

<span class="sd">        - sobol_indices (pd.DataFrame): A DataFrame containing Sobol indices for each input variable.</span>
<span class="sd">        - shapley_effects (pd.DataFrame): A DataFrame containing Shapley effects for each input variable.</span>
<span class="sd">        - total_index (pd.DataFrame): A DataFrame containing the total index for each input variable.</span>

<span class="sd">Notes:</span>
<span class="sd">    - The method assumes that the necessary data and configurations are already set in the class instance.</span>
<span class="sd">    - If resampling is enabled (`self.resampling` is True), confidence intervals (CIs) are calculated for Sobol indices and Shapley effects.</span>
<span class="sd">    - The method uses helper functions like `transform_data`, `legendre_expand`, `run_regression`, `stats`, `plot_hdmr`, `eval_sobol_indices`, `get_shapley`, and `get_total_index` to perform specific tasks.</span>
<span class="sd">    - The completion message includes a randomly selected quote for a touch of inspiration.</span>

<span class="sd">Example:</span>
<span class="sd">    &gt;&gt;&gt; sobol_indices, shapley_effects, total_index = instance.run_all()</span>
<span class="sd">    &gt;&gt;&gt; print(sobol_indices)</span>
<span class="sd">    &gt;&gt;&gt; print(shapley_effects)</span>
<span class="sd">    &gt;&gt;&gt; print(total_index)</span>
<span class="sd">&quot;&quot;&quot;</span>
    <span class="c1"># Define a helper function to print headings</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">print_step</span><span class="p">(</span><span class="n">step_name</span><span class="p">):</span>
        <span class="n">print_heading</span><span class="p">(</span><span class="n">step_name</span><span class="p">)</span>

    <span class="c1"># Step 1: Transform data to unit hypercube</span>
    <span class="n">print_step</span><span class="p">(</span><span class="s1">&#39;Transforming data to unit hypercube&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>

    <span class="c1"># Step 2: Build basis functions</span>
    <span class="n">print_step</span><span class="p">(</span><span class="s1">&#39;Building basis functions&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">legendre_expand</span><span class="p">()</span>

    <span class="c1"># Step 3: Run regression analysis</span>
    <span class="n">print_step</span><span class="p">(</span><span class="s1">&#39;Running regression analysis&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_regression</span><span class="p">()</span>

    <span class="c1"># Step 4: Calculate RS-HDMR model performance statistics</span>
    <span class="n">print_step</span><span class="p">(</span><span class="s1">&#39;RS-HDMR model performance statistics&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_stats</span><span class="p">()</span> 
    <span class="nb">print</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_plot_hdmr</span><span class="p">()</span>

    <span class="c1"># Step 5: Evaluate Sobol indices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">eval_all_indices</span><span class="p">()</span>
    <span class="n">sobol_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span> <span class="s1">&#39;coeff&#39;</span><span class="p">])</span>

    <span class="c1"># Step 6: Calculate Shapley effects</span>
    <span class="n">shapley_effects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shap</span>

    <span class="c1"># Step 7: Calculate total index </span>
    <span class="n">total_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>

    <span class="c1"># Step 8: Perform resampling if enabled</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resampling</span><span class="p">:</span>
        <span class="n">print_step</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Running bootstrap resampling </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">number_of_resamples</span><span class="si">}</span><span class="s1"> samples for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">CI</span><span class="si">}</span><span class="s1">% CI&#39;</span><span class="p">)</span> 
        <span class="n">do_resampling</span> <span class="o">=</span> <span class="n">resample</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_pruned_data</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_resamples</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">do_resampling</span><span class="o">.</span><span class="n">do_resampling</span><span class="p">()</span> 
        <span class="n">sobol_indices</span> <span class="o">=</span> <span class="n">do_resampling</span><span class="o">.</span><span class="n">get_sobol_quantiles</span><span class="p">(</span><span class="n">sobol_indices</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CI</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sobol_indices</span> <span class="o">=</span> <span class="n">sobol_indices</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="c1"># Calculate quantiles for Shapley effects</span>
        <span class="n">shapley_effects</span> <span class="o">=</span> <span class="n">do_resampling</span><span class="o">.</span><span class="n">get_shap_quantiles</span><span class="p">(</span><span class="n">shapley_effects</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CI</span><span class="p">)</span> 
        <span class="n">print_step</span><span class="p">(</span><span class="s1">&#39;Completed bootstrap resampling&#39;</span><span class="p">)</span>

    <span class="c1"># Step 9: Print completion message with a quote</span>
    <span class="n">quote</span> <span class="o">=</span> <span class="n">quotes</span><span class="o">.</span><span class="n">get_quote</span><span class="p">()</span> 
    <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;                  Completed all analysis</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="s2">&quot;                 ------------------------</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">quote</span><span class="p">,</span><span class="w"> </span><span class="mi">58</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="n">print_step</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sobol_indices</span><span class="p">,</span> <span class="n">shapley_effects</span><span class="p">,</span> <span class="n">total_index</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.run_plot_hdmr" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_plot_hdmr</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Plots the High-Dimensional Model Representation (HDMR) of the model's predictions.</p>
<p>This method uses the <code>plot_hdmr</code> function from the <code>stats</code> module to visualize the 
HDMR of the actual values (<code>self.Y</code>) against the predicted values (<code>self.y_pred</code>).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_plot_hdmr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plots the High-Dimensional Model Representation (HDMR) of the model&#39;s predictions.</span>

<span class="sd">    This method uses the `plot_hdmr` function from the `stats` module to visualize the </span>
<span class="sd">    HDMR of the actual values (`self.Y`) against the predicted values (`self.y_pred`).</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plot_hdmr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_pred</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.run_regression" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_regression</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Runs the regression analysis using the specified method.</p>
<p>Uses the <code>regression.regression</code> utility based on <code>self.method</code>.</p>


<details class="updates-the-following-attributes" open>
  <summary>Updates the following attributes</summary>
  <p>self.coef_ (np.array): The regression coefficients obtained from the fit.
self.y_pred (np.array): The predicted values based on the fitted model.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_regression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the regression analysis using the specified method.</span>

<span class="sd">    Uses the `regression.regression` utility based on `self.method`.</span>

<span class="sd">    Updates the following attributes:</span>
<span class="sd">        self.coef_ (np.array): The regression coefficients obtained from the fit.</span>
<span class="sd">        self.y_pred (np.array): The predicted values based on the fitted model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">regression_instance</span> <span class="o">=</span> <span class="n">regression</span><span class="p">(</span>
        <span class="n">X_T_L</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">X_T_L</span><span class="p">,</span>
        <span class="n">Y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
        <span class="n">n_iter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_iter</span><span class="p">,</span>
        <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
        <span class="n">cv_tol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cv_tol</span><span class="p">,</span>
        <span class="n">starting_iter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">starting_iter</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">coef_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_pred</span> <span class="o">=</span> <span class="n">regression_instance</span><span class="o">.</span><span class="n">run_regression</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.run_stats" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_stats</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Calculates and stores evaluation statistics for the fitted model.</p>
<p>Uses the <code>stats.stats</code> utility.</p>


<details class="updates-the-following-attributes" open>
  <summary>Updates the following attributes</summary>
  <p>self.evs (dict): A dictionary containing evaluation statistics (e.g., R^2, MSE).</p>
</details>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates and stores evaluation statistics for the fitted model.</span>

<span class="sd">    Uses the `stats.stats` utility.</span>

<span class="sd">    Updates the following attributes:</span>
<span class="sd">        self.evs (dict): A dictionary containing evaluation statistics (e.g., R^2, MSE).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">evs</span> <span class="o">=</span> <span class="n">model_stats</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_pred</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coef_</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="shapleyx.rshdmr.transform_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transform_data</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Transforms the input data <code>self.X</code> into a unit hypercube.</p>


<details class="updates-the-following-attributes" open>
  <summary>Updates the following attributes</summary>
  <p>self.ranges (list): The ranges (min, max) of the original data features.
self.X_T (pd.DataFrame): The transformed data matrix within the unit hypercube.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>shapleyx\shapleyx.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transforms the input data `self.X` into a unit hypercube.</span>

<span class="sd">    Updates the following attributes:</span>
<span class="sd">        self.ranges (list): The ranges (min, max) of the original data features.</span>
<span class="sd">        self.X_T (pd.DataFrame): The transformed data matrix within the unit hypercube.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">transformation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
    <span class="n">transformed_data</span><span class="o">.</span><span class="n">do_transform</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ranges</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">get_ranges</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">X_T</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">get_X_T</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../how-to-guides/common-tasks/" class="btn btn-neutral float-left" title="Common Tasks"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ard/" class="btn btn-neutral float-right" title="ARD">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/frbennett/shapleyx" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../../how-to-guides/common-tasks/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ard/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
